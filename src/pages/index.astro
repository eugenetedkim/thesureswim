---
import { sanity } from "../lib/sanity";
import { urlFor } from "../lib/sanityImage";

const query = `*[_type == "siteSettings"][0]{
  logoImage,
  businessName,
  ownerName,
  phone,
  email,
  heroHeadline,
  heroSubheadline
}`;

const s = await sanity.fetch(query);

const bizName = s?.businessName ?? "SureSwim Pool & Spa";
const owner = s?.ownerName ?? "Eugene Kim";
const phone = s?.phone ?? "(909) 668-3521";
const phoneHref = `tel:${phone.replace(/[^\d+]/g, "")}`;
const email = s?.email ?? "info@thesureswim.com";
const logoUrl = s?.logoImage ? urlFor(s.logoImage).width(900).quality(95).url() : null;
---

<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{bizName}</title>

<style>
:root{
  --text:#0f172a;
  --muted:#475569;
  --border:#e2e8f0;
  --accent:#0b5ed7;
  --soft:#f8fafc;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui,-apple-system,"Segoe UI",sans-serif;
  color:var(--text);
  line-height:1.7;
}
header{
  border-bottom:1px solid var(--border);
}
nav{
  max-width:1120px;
  margin:auto;
  padding:18px 24px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
nav img{
  height:78px;
}
nav a{
  margin-left:20px;
  font-size:14px;
  text-decoration:none;
  color:var(--muted);
}
section{
  max-width:1120px;
  margin:auto;
  padding:72px 24px;
}
.hero h1{
  font-size:clamp(44px,5vw,68px);
  letter-spacing:-0.03em;
  margin:0 0 16px;
}
.hero p{
  max-width:72ch;
  font-size:18px;
  color:var(--muted);
}
.menu{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:24px;
  margin-top:32px;
}
.card{
  border:1px solid var(--border);
  border-radius:18px;
  padding:22px;
}
.card h3{margin:0 0 8px;font-size:18px}
.card p{margin:0;font-size:15px;color:var(--muted)}
.soft{background:var(--soft)}
.primary{color:var(--accent);font-weight:600;text-decoration:none}
form input,form textarea{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid var(--border);
}
form button{
  margin-top:16px;
  padding:12px 22px;
  border-radius:12px;
  border:none;
  background:var(--accent);
  color:#fff;
  font-weight:600;
}
footer{
  border-top:1px solid var(--border);
  padding:36px 24px;
  text-align:center;
  font-size:14px;
  color:var(--muted);
}
</style>
</head>

<body>

<header>
  <nav>
    {logoUrl && <img src={logoUrl} alt={bizName} />}
    <div>
      <a href="/approach">Approach</a>
      <a href="#contact">Contact</a>
    </div>
  </nav>
</header>

<section class="hero">
  <h1>{s?.heroHeadline ?? "More Than Pool Cleaning."}</h1>

  <p>
    {s?.heroSubheadline ??
    "Caretaking one of your homeâ€™s largest systems â€” including what you canâ€™t see â€” so your pool stays clean, stable, and safe over time."}
  </p>

  <p>
    Youâ€™ll see a clean pool. The difference is the thinking that happens behind the scenes â€”
    especially after storms, heat, or time away.
  </p>

  <p><a class="primary" href="/approach">Read the full approach â†’</a></p>
</section>

<section class="soft">
  <h2>What sets SureSwim apart</h2>

  <div class="menu">
    <div class="card"><h3>Owner-operated</h3><p>I work on every pool myself.</p></div>
    <div class="card"><h3>Systems mindset</h3><p>Water, flow, filtration, and equipment managed together.</p></div>
    <div class="card"><h3>Stability over shortcuts</h3><p>Prevent drift instead of reacting to problems.</p></div>
    <div class="card"><h3>Liquid-first chemistry</h3><p>Predictable sanitation without runaway stabilizer.</p></div>
    <div class="card"><h3>Real-world problem solving</h3><p>Imperfect systems handled calmly and thoughtfully.</p></div>
    <div class="card"><h3>Cost-aware care</h3><p>Balanced cleanliness, wear, and operating cost.</p></div>
  </div>
</section>

<section id="contact" class="soft">
  <h2>Contact</h2>

  <p>
    <strong>{owner}</strong><br/>
    {bizName}<br/>
    <a href={phoneHref}>{phone}</a><br/>
    <a href={`mailto:${email}`}>{email}</a>
  </p>

  <p>If calling or texting isnâ€™t convenient, leave a message:</p>

  <!-- ðŸ”´ REPLACE WITH YOUR REAL FORMSPREE ENDPOINT -->
  <form method="POST" action="https://formspree.io/f/mkgqbvgb">
    <input type="email" name="email" placeholder="Email" required>
    <textarea name="message" rows="5" placeholder="Message" required></textarea>
    <input type="hidden" name="_replyto">
    <input type="hidden" name="_redirect" value="https://thesureswim.com/">
    <input type="text" name="_gotcha" style="display:none">
    <button type="submit">Send message</button>
  </form>

  <p>Licensed business â€¢ Liability insured â€¢ CPO certified</p>
</section>

<footer>
  Â© {new Date().getFullYear()} {bizName} â€” {owner}
</footer>

</body>
</html>
